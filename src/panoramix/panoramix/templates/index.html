<!DOCTYPE HTML>
<html>
<head>
    <title>Panoramix</title>
    <script src="/static/js/jquery-3.4.1.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/toastr.min.js"></script>
    <script src="/static/js/socket.io.js"></script>
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/css/toastr.min.css" rel="stylesheet">

    <script type="text/javascript" charset="utf-8">
        $(document).ready(function() {

            namespace = '/api';

            var socket = io(namespace);

            socket.on('connect', function() {
                toastr.success('Connected to api')
            });

            socket.on('console_out', function(msg) {
                $('#console').append(msg.text);
                if($('#console').length)
                    $('#console').scrollTop($('#console')[0].scrollHeight - $('#console').height());
            });

            socket.on('console_msg', function(msg) {
              if (msg.level == 'ERROR' || msg.level == 'FATAL') {
                toastr.error(msg.msg, msg.name, {timeOut: 0, extendedTimeout: 0, closeButton: true})
              } else if (msg.level == 'WARN') {
                toastr.warning(msg.msg, msg.name, {timeOut: 0, extendedTimeout: 0, closeButton: true})
              }
            });
        });
    </script>

</head>
<body>
    <h1>Panoramix</h1>

    <h5>Console</h2>
    <div class="form-control" id="console" readonly></div>

    <style>
      #console {
        height: 300px;
        overflow-y: scroll;
      }
    </style>
</body>
</html>
